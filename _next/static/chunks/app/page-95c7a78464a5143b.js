(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9562:(e,t,a)=>{Promise.resolve().then(a.bind(a,266))},266:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var s=a(5155),n=a(2115);let i=e=>{let{commands:t,downloads:a}=e;return(0,s.jsxs)("div",{className:"hidden md:block w-1/3 bg-gray-900 text-white p-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Network"}),(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left",children:"Name"}),(0,s.jsx)("th",{className:"text-left",children:"Status"}),(0,s.jsx)("th",{className:"text-left",children:"Type"})]})}),(0,s.jsx)("tbody",{children:a.map((e,t)=>(0,s.jsxs)("tr",{className:"200"===e.status?"bg-green-800":"bg-gray-400",children:[(0,s.jsx)("td",{className:"whitespace-nowrap",children:e.name}),(0,s.jsx)("td",{className:"whitespace-nowrap",children:e.status}),(0,s.jsx)("td",{className:"whitespace-nowrap",children:e.type})]},t))})]})]}),t.length?(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-md font-semibold mb-2",children:"nd-javascript"}),(0,s.jsx)("div",{className:"bg-gray-800 p-2 overflow-x-auto whitespace-nowrap",children:t.map((e,t)=>(0,s.jsx)("div",{className:"py-1 border-b border-gray-700 last:border-b-0",children:e},t))})]}):null]})},r=e=>{let{title:t="NDJavaScript Emulator - Please load a page",content:a,className:n="",commands:r,downloads:l,url:o}=e;return(0,s.jsx)("div",{className:"w-full border border-gray-300 rounded-lg shadow-lg overflow-hidden ".concat(n),children:(0,s.jsxs)("div",{className:"flex h-[calc(60vh-8rem)]",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full md:w-2/3",children:[(0,s.jsxs)("div",{className:"bg-gray-200 px-4 py-2 flex items-center",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),(0,s.jsx)("div",{className:"ml-4 text-sm font-medium text-gray-700 flex-grow text-center",children:t})]}),(0,s.jsx)("div",{className:"bg-white border-t border-b border-gray-300 px-4 py-2",children:(0,s.jsx)("div",{className:"bg-gray-100 rounded px-3 py-1 text-sm text-gray-800",children:o||"https://ndjavascript.cdaringe.com/"})}),(0,s.jsx)("div",{className:"emulator-main bg-white flex-grow overflow-auto ",children:a})]}),(0,s.jsx)(i,{commands:r,downloads:l})]})})},l=e=>{let{step:t,code:a,type:n,name:i,description:r}=e;return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-2",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Step ",t+1," - ",i]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"bg-gray-100 p-4 pt-6 rounded mb-4",children:(0,s.jsx)("code",{className:"text-sm",children:a})}),(0,s.jsx)("pre",{className:"ml-1 block text-xs absolute top-[-0.5rem] rounded-lg bg-gray-300 p-1",children:(0,s.jsx)("code",{children:n})})]}),r]})},o=()=>{let[e,t]=(0,n.useState)({x:150,y:150}),[a,i]=(0,n.useState)({x:150,y:180}),[r,l]=(0,n.useState)({x:150,y:220}),[o,c]=(0,n.useState)({x:150,y:50}),[d,m]=(0,n.useState)(null),p=e=>()=>{m(e)},h=()=>{m(null)};return(0,s.jsx)("div",{children:(0,s.jsxs)("svg",{width:"300",height:"300",viewBox:"0 0 300 300",onMouseMove:e=>{var a;if(!d)return;let s=e.currentTarget,n=s.createSVGPoint();n.x=e.clientX,n.y=e.clientY;let r=n.matrixTransform(null===(a=s.getScreenCTM())||void 0===a?void 0:a.inverse());switch(d){case"nose":t({x:r.x,y:r.y});break;case"mustache":i({x:r.x,y:r.y});break;case"chin":l({x:r.x,y:r.y});break;case"hat":c({x:r.x,y:r.y})}},onMouseUp:h,onMouseLeave:h,children:[(0,s.jsx)("rect",{x:o.x-50,y:o.y,width:"100",height:"30",fill:"red",onMouseDown:p("hat"),style:{cursor:"move"}}),(0,s.jsx)("circle",{cx:"150",cy:"150",r:"100",fill:"#ffdbac"}),(0,s.jsx)("circle",{cx:"120",cy:"120",r:"10",fill:"black"}),(0,s.jsx)("circle",{cx:"180",cy:"120",r:"10",fill:"black"}),(0,s.jsx)("circle",{cx:e.x,cy:e.y,r:"15",fill:"#ffb6c1",onMouseDown:p("nose"),style:{cursor:"move"}}),(0,s.jsx)("rect",{x:a.x-40,y:a.y,width:"80",height:"10",fill:"brown",onMouseDown:p("mustache"),style:{cursor:"move"}}),(0,s.jsx)("path",{d:"M ".concat(r.x-40," ").concat(r.y," Q ").concat(r.x," ").concat(r.y+20," ").concat(r.x+40," ").concat(r.y),fill:"none",stroke:"black",strokeWidth:"2",onMouseDown:p("chin"),style:{cursor:"move"}})]})})};var c=a(2669),d=a(5687);let m=()=>{let e=(0,n.createRef)(),[t,a]=(0,n.useState)(0),[i,m]=(0,n.useState)("NDJavaScript Emulator - Follow steps below to begin"),[p,h]=(0,n.useState)(""),[u,x]=(0,n.useState)(""),[y,v]=(0,n.useState)([]),[g,b]=(0,n.useState)([]);(0,n.useEffect)(()=>{if("1"!==new URL(window.location.href).searchParams.get("auto"))return;let t=setTimeout(()=>{var t;console.log("clicking"),null===(t=e.current)||void 0===t||t.click()},10);return()=>clearTimeout(t)},[e]);let j=[{name:"Start loading a page",description:"Simulate starting a page load. On large viewports, you'll see the network request in the simulated devtools",type:"user-action",code:"GET https://ndjavascript.cdaringe.com/",execute:()=>{h("https://ndjavascript.cdaringe.com/"),b(e=>[...e,{name:"ndjavascript.cdaringe.com",status:null,type:""}])}},{name:"Page stream begings",description:(0,s.jsxs)(s.Fragment,{children:["The HTTP handshake will succeed, and we are now streaming the page content. Specifically, instead of a"," ",(0,s.jsx)("pre",{className:"inline",children:"content-type: text/html"}),", we have a stream of"," ",(0,s.jsx)("pre",{className:"inline",children:"content-type: application/nd-javascript"}),"!"]}),type:"event",code:"GET https://ndjavascript.cdaringe.com/",execute:()=>{b([{name:"ndjavascript.cdaringe.com",status:"200",type:"nd-javascript"}])}},{name:"Set page title",description:(0,s.jsxs)(s.Fragment,{children:["Here we see our first nd-javascript command in our HTTP stream. Historically, we would use HTML to set a title, a la"," ",(0,s.jsx)("pre",{className:"inline",children:"<title>some boring page</title>"}),". Who needs HTML!? We have JavaScript!"]}),type:"application/nd-javascript",code:'document.title = "Super Morio Adventure"',execute:()=>{m("Super Morio Adventure"),v(e=>[...e,'document.title = "Super Morio Adventure"'])}},{name:"Set initial styles",description:"Immediately inline some styles. We want to see something while the rest of our program streams in.",type:"application/nd-javascript",code:"document.head.appendChild(styleElement)",execute:()=>{x(e=>"\n          ".concat(e,"\n          <style>\n            .emulator-main {\n              background-color: lightblue;\n              width: 100%;\n              height: 100%;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n            }\n          </style>\n        ")),v(e=>[...e,"document.head.appendChild(styleElement)"])}},{name:"Create initial DOM nodes",description:"Create the initial DOM nodes for the page. Again, we used to use HTML for this. However, our application doesn't deal in HTML--it deals in JavaScript & JavaScript Runtimes, including the window and its APIs! Once content is on the screen, it is not immediately interactable. If a proposal like this were ever be adopted, it is not yet clear when interactability would be granted. Nonetheless, we have not bound behavior yet--just visual nodes.",type:"application/nd-javascript",code:'document.body.innerHTML = "<main><div id=\\"morio-face-container\\">...</div></main>"',execute:()=>{let e=(0,d.F0)((0,s.jsx)(o,{}));x(t=>"".concat(t,"<main><div id='root'>").concat(e,"</div></main>\n        ")),v(e=>[...e,'document.body.innerHTML = "<main><div id=\\"morio-face-container\\">...</div></main>"'])}},{name:"Start downloading styles",description:"Perhaps our application needs some external CSS. Sure--go grab it! We used to use <link /> for such an operation.",type:"application/nd-javascript",code:'import("styles.css", { assert: { type: "css" } })',execute:()=>{b(e=>[...e,{name:"styles.css",status:null,type:"text/css"}]),v(e=>[...e,'import("styles.css", { assert: { type: "css" } })'])}},(()=>{let e='import("./super-morio").then(() => boot()))';return{name:"Start downloading assets",description:"We are streaming nd-javascript because we are fundamentally building an application, not a simple document. Thus, let us fetch the javascript powering our interactive application. For small applications, it may be common to not make external requests at all, and instead continue stream in code within this open stream.",type:"application/nd-javascript",code:e,execute:()=>{b(e=>[...e,{name:"super-morio.js",status:null,type:"javascript"}]),v(t=>[...t,e])}}})(),(()=>{let e="const meta = document.createElement('meta'); meta.name = 'description'; meta.content = 'This is a tutorial for the application/nd-javascript MIME type.';";return{name:"Set page metadata",description:"We want bots and crawlers to know what this application is about--prepare metadata for them.",type:"application/nd-javascript",code:e,execute:()=>{v(t=>[...t,e])}}})(),{name:"Event: CSS loaded",type:"event",description:"This event is fired when the CSS file has been loaded. We make it a descrete step in this tutorial so you can observe the effects.",code:"stylesheet#onLoad",execute:()=>{b(e=>e.map(e=>("styles.css"===e.name&&(e.status="200"),e))),x(e=>"<style>\n            .emulator-main {\n              width: 100%;\n              height: 100%;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n\n              background-image: url('super-morio.webp');\n              background-size: calc(4% + 200px) calc(4% + 200px);\n              background-repeat: repeat;\n            }\n          </style>\n          ".concat(e,"\n        "))}},(()=>{let e='const boot = () => ReactDOM.hydrateRoot(document.getElementById("root"), <SuperMorioFace />)';return{name:"React hydration",description:"Prepare a boot function. This function will be invoked per the above code when our remote javascript finishes loading.",type:"application/nd-javascript",code:e,execute:()=>{v(t=>[...t,e])}}})(),{name:"Event: JS loaded",type:"event",description:(0,s.jsxs)(s.Fragment,{children:["This event is fired when the JS file has been loaded. Notice that in the current state, the devtools show the JS file as a gray color, thus still loading. Also observe that the face in the GUI is non interactable. Let us simulate the JS file loading. Afterwards, the boot function will have completed and the app should be interactable!"," ",(0,s.jsxs)("b",{children:["Press Next and then play with Super Morio","'","s face!"]})]}),code:"importScript#onLoad",execute:()=>{b(e=>e.map(e=>("super-morio.js"===e.name&&(e.status="200"),e))),setTimeout(()=>{let e=document.getElementById("root");(0,c.hydrateRoot)(e,(0,s.jsx)(n.StrictMode,{children:(0,s.jsx)(o,{})}))},50)}}],w=()=>{t<j.length&&(j[t].execute(),a(e=>e+1),setTimeout(()=>{let e=document.querySelectorAll(".step");e[t+1]&&e[t+1].scrollIntoView({behavior:"smooth"})},10))};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)("div",{className:"w-full bg-gray-100",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"py-12",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"application/nd-javascript Tutorial"}),(0,s.jsx)("p",{className:"text-xl text-gray-700 mb-8",children:"This tutorial demonstrates how the proposed application/nd-javascript MIME type works. It simulates a stream of newline-delimited JavaScript statements and shows how they affect a web page in real-time."})]})})}),(0,s.jsx)("div",{className:"sticky top-0 z-10 w-full bg-gray-100",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 border-b-gray-500 relative ",children:(0,s.jsx)(r,{title:i,content:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:u}})}),commands:y,downloads:g,url:p})})}),(0,s.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 pb-24",children:(0,s.jsx)("div",{children:j.map((a,n)=>n<=t?(0,s.jsxs)("div",{className:"step mb-4 last:mb-0 pt-4 first:pt-0 border-t first:border-t-0 border-gray-200",children:[(0,s.jsx)(l,{step:n,name:a.name,type:a.type,code:a.code,description:a.description}),n===t&&n<j.length&&(0,s.jsx)("div",{className:"float-end mt-1",children:(0,s.jsx)("button",{ref:e,onClick:w,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Next"})})]},n):null)})})]})}},5687:(e,t,a)=>{"use strict";var s,n;s=a(4592),n=a(9506),s.version,t.F0=s.renderToString,s.renderToStaticMarkup,n.renderToReadableStream,n.resume&&n.resume}},e=>{var t=t=>e(e.s=t);e.O(0,[690,390,441,517,358],()=>t(9562)),_N_E=e.O()}]);